define([],function(){function a(){this._callbacks={},this._isPending={},this._isHandled={},this._isDispatching=!1,this._pendingPayload=null}var b=1,c="CALLBACK_ID_";return a.prototype.register=function(a){var d=c+b++;return this._callbacks[d]=a,d},a.prototype.unregister=function(a){this._callbacks[a]=null},a.prototype.dispatch=function(a){this._startDispatching(a);try{for(var b in this._callbacks)this._isPending[b]||this._invokeCallback(b)}finally{this._stopDispatching()}},a.prototype.isDispatching=function(){return this._isDispatching},a.prototype._invokeCallback=function(a){this._callbacks[a]&&(this._isPending[a]=!0,this._callbacks[a](this._pendingPayload),this._isHandled[a]=!0)},a.prototype._startDispatching=function(a){for(var b in this._callbacks)this._isPending[b]=!1,this._isHandled[b]=!1;this._pendingPayload=a,this._isDispatching=!0},a.prototype._stopDispatching=function(){this._pendingPayload=null,this._isDispatching=!1},a});