define(["EventEmitter","constants/SERVICE_STATE","constants/SOCKET_EVENTS","services/socketService"],function(a,b,c,d){function e(){this.super=a,this.super(),this._servicesRepository={}}var f="change";return e.prototype=new a,e.prototype.addService=function(a){this._servicesRepository[a.id]=a},e.prototype.count=function(){return Object.keys(this._servicesRepository).length},e.prototype.runningServicesCount=function(){return _.filter(this._servicesRepository,function(a){return a.state==b.RUN}).length},e.prototype.stoppedServiceCount=function(){return _.filter(this._servicesRepository,function(a){return a.state==b.STOP}).length},e.prototype.getAll=function(){return this._servicesRepository},e.prototype.getAllRunning=function(){return _.filter(this._servicesRepository,function(a){return a.isRunning})},e.prototype.getById=function(a){return this._servicesRepository[a]},e.prototype.getByName=function(a){return _.filter(this._servicesRepository,function(b){return b.name==a})[0]},e.prototype.startService=function(a){var b=this.getById(a);b&&d.emit(c.SERVICE_START,{name:b.name,environment:b.selectedEnvironment})},e.prototype.stopService=function(a){var b=this.getById(a);b&&d.emit(c.SERVICE_STOP,{name:b.name})},e.prototype.restartService=function(a){var b=this.getById(a);b&&d.emit(c.SERVICE_RESTART,{name:b.name,environment:b.selectedEnvironment})},e.prototype.stopAllRunningServices=function(){d.emit(c.SWAMP_STOP_ALL,{})},e.prototype.restartAllRunningServices=function(){d.emit(c.SWAMP_RESTART_ALL,{})},e.prototype.startAllServices=function(){d.emit(c.SWAMP_START_ALL,{})},e.prototype.emitChange=function(){this.emitEvent(f)},e.prototype.addChangeListener=function(a){this.on(f,a)},e.prototype.removeChangeListener=function(a){this.off(f,a)},e});