define(["EventEmitter","constants/AGGREGATED_LIST_TYPE","definitions/AggregatedData"],function(a,b,c){function d(){this.super=a,this.super(),this._errorLogData=null,this._outLogData=null,this._isPanelOpen=!1,this._isBrowserFocused=!0,this._createLogDataContainers()}var e="change",f=document.title,g=1500,h=null;return d.prototype=new a,d.prototype.isPanelOpen=function(){return this._isPanelOpen},d.prototype.setPanelState=function(a){this._isPanelOpen=!!a,this._isPanelOpen&&this.markAllAsRead()},d.prototype.getAll=function(){return{error:this._errorLogData.getAll(),out:this._outLogData.getAll()}},d.prototype.markAllOutAsRead=function(){this._outLogData.each(function(a){a.read=!0})},d.prototype.markAllErrorAsRead=function(){this._errorLogData.each(function(a){a.read=!0})},d.prototype.markAllAsRead=function(){this.markAllOutAsRead(),this.markAllErrorAsRead()},d.prototype.getUnreadOutCount=function(){var a=0;return this._outLogData.each(function(b){a+=b.read?0:1}),a},d.prototype.getUnreadErrorCount=function(){var a=0;return this._errorLogData.each(function(b){a+=b.read?0:1}),a},d.prototype.getUnreadCount=function(){return this.getUnreadOutCount()+this.getUnreadErrorCount()},d.prototype.addOut=function(a){this.isPanelOpen()&&(a.read=!0),this._outLogData.add(a),h||this._isBrowserFocused||this.toggleTitle("New Notifications...")},d.prototype.addError=function(a){this.isPanelOpen()&&(a.read=!0),this._errorLogData.add(a),h||this._isBrowserFocused||this.toggleTitle("New Notifications...")},d.prototype.setIsBrowserFocused=function(a){this._isBrowserFocused=a,a&&this.cancelToggleTitle()},d.prototype.toggleTitle=function(a){document.title=document.title==a?f:a,h=window.setTimeout(this.toggleTitle.bind(this,a),g)},d.prototype.cancelToggleTitle=function(){window.clearTimeout(h),h=null,document.title=f},d.prototype._createLogDataContainers=function(){this._outLogData=new c(b.FIFO),this._errorLogData=new c(b.FIFO)},d.prototype.emitChange=function(){this.emitEvent(e)},d.prototype.addChangeListener=function(a){this.on(e,a)},d.prototype.removeChangeListener=function(a){this.off(e,a)},d});