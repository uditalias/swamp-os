define(["EventEmitter","constants/DEFAULT_WINDOW_OPTIONS","constants/WINDOW_TYPE"],function(a,b,c){function d(d,e,f){this.super=a,this.super(),this.id=_.guid(),this._payload=e,this._payloadId=this._payload.name,this._type=d,this._title=this._type==c.PLUGIN&&this._payload.config&&this._payload.config.title?this._payload.config.title:"",this._menuTree=null,this._focused=!1,this._zoomed=!1,this._minimized=!1,this._prompt=null,this._type==c.PLUGIN&&this._payload.config&&this._payload.config.window&&(f=this._payload.config.window),this.options=_.defaults(f||{},_.cloneDeep(b)),this.setInitialPosition()}return d.prototype=new a,d.prototype.getMenuTree=function(){return this._menuTree},d.prototype.setMenuTree=function(a){this._menuTree=a},d.prototype.hasMenu=function(){return!!this._menuTree},d.prototype.getType=function(){return this._type},d.prototype.getPayloadId=function(){return this._payloadId},d.prototype.getPayload=function(){return this._payload},d.prototype.setPrompt=function(a,b,c){this._prompt={text:a,onConfirm:b||function(){},onCancel:c||function(){},okBtnText:"OK",cancelBtnText:"Cancel"}},d.prototype.hasPrompt=function(){return!!this._prompt},d.prototype.getPrompt=function(){return this._prompt},d.prototype.confirmPrompt=function(){this._prompt&&this._prompt.onConfirm(),this.clearPrompt()},d.prototype.cancelPrompt=function(){this._prompt&&this._prompt.onCancel(),this.clearPrompt()},d.prototype.clearPrompt=function(){this._prompt=null},d.prototype.getPosition=function(){return this.options.position},d.prototype.getSize=function(){return this.options.size},d.prototype.isDraggable=function(){return this.options.draggable},d.prototype.isResizable=function(){return this.options.resizable},d.prototype.isMinimizable=function(){return this.options.minimizable},d.prototype.isMaximizable=function(){return this.options.maximizable},d.prototype.getTitle=function(){return this._title||this._payloadId},d.prototype.setTitle=function(a){this._title=a},d.prototype.focus=function(a){this._focused=!0,this.options.zIndex=a?a:this.options.zIndex},d.prototype.blur=function(){this._focused=!1},d.prototype.toggleZoom=function(){this._zoomed=!this._zoomed,this.isZoomed()&&this.isMinimized()&&this.toggleMinimize()},d.prototype.toggleMinimize=function(){this._minimized=!this._minimized,this.isMinimized()&&this.isZoomed()&&this.toggleZoom()},d.prototype.isFocused=function(){return this._focused},d.prototype.isZoomed=function(){return this._zoomed},d.prototype.isMinimized=function(){return this._minimized},d.prototype.getMinWidth=function(){return this.options.minWidth},d.prototype.getMinHeight=function(){return this.options.minHeight},d.prototype.getZindex=function(){return this.options.zIndex},d.prototype.getOptionsClasses=function(){var a=[];return this.isFocused()&&a.push("focused"),this.isZoomed()&&a.push("zoomed"),this.isMinimized()&&a.push("minimized"),a},d.prototype.setInitialPosition=function(){var a=$(window).outerHeight(!0),b=$(window).outerWidth(!0);this.options.position.top=a/2-this.options.size.height/2,this.options.position.top=this.options.position.top>0?this.options.position.top:0,this.options.position.left=b/2-this.options.size.width/2,this.options.position.left=this.options.position.left>0?this.options.position.left:0},d.prototype.setPosition=function(a,b){this.options.position.top=a,this.options.position.left=b},d});