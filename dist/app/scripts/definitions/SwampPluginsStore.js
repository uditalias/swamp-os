define(["EventEmitter","services/serializeService","definitions/SwampPlugin","env"],function(a,b,c,d){function e(b){this.super=a,this.super(),this._pluginsRepository={},b&&_.forEach(b,function(a){f.call(this,a)}.bind(this))}function f(a){$.getJSON(a+"swamp.json").then(g.bind(this,a))}function g(a,e){e.version=d.version;var f=b.serializeSwampPlugin(e,a);this.addPlugin(new c(f))}var h="change";return e.prototype=new a,e.prototype.addPlugin=function(a){this._pluginsRepository[a.id]=a},e.prototype.count=function(){return Object.keys(this._pluginsRepository).length},e.prototype.getAll=function(){return this._pluginsRepository},e.prototype.getById=function(a){return this._pluginsRepository[a]},e.prototype.getByName=function(a){return _.filter(this._pluginsRepository,function(b){return b.name==a})[0]},e.prototype.emitChange=function(){this.emitEvent(h)},e.prototype.addChangeListener=function(a){this.on(h,a)},e.prototype.removeChangeListener=function(a){this.off(h,a)},e});