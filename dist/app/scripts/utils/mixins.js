define(["_"],function(a){String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})},a.mixin({deepFind:function(a,b,c){var d,e,f,g=0;for(d=b&&b.split("."),e=d&&d.length;e>g&&a;){if(f=d[g],g++,g>=e&&null!=c)return void(a[f]=c);a=a[f]}return e>g&&(a=null),a}}),a.mixin({pushAll:function(a,b){a.push.apply(a,b)}}),a.mixin({emptyArray:function(a){a.length=0}}),a.mixin({nextPrevPageParser:function(b){var c={},d=b._resultmeta||b;return d.next&&(c.next=a.parseInt(/\w*page=(\d+)/i.exec(d.next)[1])),d.previous&&(c.prev=a.parseInt(/\w*page=(\d+)/i.exec(d.previous)[1])),c}}),a.mixin({cloneArray:function(a){return a.slice(0)}}),a.mixin({throttleStore:function(b,c,d){var e=[],f=a.throttle(function(){b(a.cloneArray(e)),a.emptyArray(e)},c,d);return function(b){a.pushAll(e,b),f()}}}),a.mixin({arrayRemoveItem:function(a,b){var c=a.indexOf(b);-1!=c&&a.splice(c,1)}}),a.mixin({getUrls:function(a){for(var b,c,d=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,e=[];c=a.match(d);)b=c[0],e.push(b),a=a.replace(b,"");return e}}),a.mixin({guid:function(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).substr(-4)}}),a.mixin({bytesToSize:function(a){var b=1e3,c=["Bytes","KB","MB","GB","TB"];if(0===a)return"0 Bytes";var d=parseInt(Math.floor(Math.log(a)/Math.log(b)),10);return(a/Math.pow(b,d)).toPrecision(3)+" "+c[d]}}),a.mixin({toArray:function(b){var c=[],b=b||{};return a.forEach(b,function(a){c.push(a)}),c}})});