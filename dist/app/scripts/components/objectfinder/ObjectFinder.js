define(["react","jsx!components/objectfinder/finderitem/FinderItem","perfectScrollbar"],function(a,b){var c=[38,40,13],d=a.createClass({displayName:"ObjectFinder",getInitialState:function(){return{results:[],query:""}},componentWillUnmount:function(){$(".object-finder .finder-results ul").perfectScrollbar("destroy")},componentDidMount:function(){},render:function(){var c,d=[];return this.state.query&&0==this.state.results.length&&(c=a.DOM.div({className:"no-finder-results flex flex-align-center flex-pack-center text-center padding-15"},a.DOM.div(null,a.DOM.div({className:"text-16 w400 margin-bottom-5"},"No Objects found for query `",a.DOM.span({className:"w700 break-word"},this.state.query),"`"),a.DOM.div({className:"text-14 w300"},"Try using a different search query")))),this.state.results.length>0?(_.forEach(this.state.results,function(a){d.push(b({key:a.id,item:a,onClick:this._onItemClick}))}.bind(this)),d=a.DOM.ul(null,d)):$(".object-finder .finder-results ul").perfectScrollbar("destroy"),a.DOM.div({className:"object-finder"},a.DOM.div({className:"finder-query"},a.DOM.input({type:"text",placeholder:"Search services and plugins...",ref:"finder_input",onKeyDown:this._onFinderKeyDown,onKeyUp:this._onFinderKeyUp}),a.DOM.div({onClick:this._clearQuery,className:(this.state.query?"":"hidden")+" clear-query"},a.DOM.i({className:"fa fa-times"}))),c,a.DOM.div({className:"finder-results"},d))},_handleArrowDown:function(){if($(".finder-item.selected").length){var a=$(".finder-item.selected").removeClass("selected").next(".finder-item");a.length?a.addClass("selected")[0].scrollIntoView():$(".finder-item").first().addClass("selected")[0].scrollIntoView(),a=null}else $(".finder-item").first().addClass("selected")[0].scrollIntoView()},_handleArrowUp:function(){if($(".finder-item.selected").length){var a=$(".finder-item.selected").removeClass("selected").prev();a.length?a.addClass("selected")[0].scrollIntoView():$(".finder-item").last().addClass("selected")[0].scrollIntoView(),a=null}else $(".finder-item").last().addClass("selected")[0].scrollIntoView()},_handleNavigation:function(a){return $(".finder-item").length?(13==a?$(".finder-item.selected").trigger("click"):40==a?this._handleArrowDown():this._handleArrowUp(),!1):!1},_clearSelectedItem:function(){$(".object-finder .finder-results .finder-item.selected").removeClass("selected")},_onFinderKeyUp:function(a){if(a.preventDefault(),a.stopPropagation(),c.indexOf(a.which)>-1)return this._handleNavigation(a.which);this._clearSelectedItem(),$(".object-finder .finder-results ul").scrollTop(0);var b=this.refs.finder_input.getDOMNode().value.trim(),d=[];return b&&(d=_.filter(this.props.services,function(a){return a.name.toLowerCase().indexOf(b.toLowerCase().trim())>-1})),this.setState({results:d,query:b},function(){$(".object-finder .finder-results ul").perfectScrollbar(),$(".object-finder .finder-results ul").perfectScrollbar("update")}),!1},_onFinderKeyDown:function(a){return c.indexOf(a.which)>-1?(a.preventDefault(),a.stopPropagation(),!1):void 0},_onItemClick:function(){this.setState({query:"",results:[]}),$(this.refs.finder_input.getDOMNode()).focus().val(""),this.props.closeAction&&this.props.closeAction()},_clearQuery:function(){this.setState({query:"",results:[]}),$(this.refs.finder_input.getDOMNode()).focus().val("")}});return d});