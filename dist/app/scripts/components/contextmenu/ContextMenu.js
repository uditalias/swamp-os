define(["react","actions/client","jsx!components/topmenu/menuitem/MenuItem","jsx!utils/jsxUtils"],function(a,b,c,d){var e=a.createClass({displayName:"ContextMenu",componentDidMount:function(){this.cancelAutoCloseHandler=null,this.props.options&&($("*:not(.context-menu ul li)").on("mousedown",this._onDocumentMouseDown),this._handleAutoClose())},componentWillUnmount:function(){$("*:not(.context-menu ul li)").off("mousedown",this._onDocumentMouseDown),this.cancelAutoCloseHandler&&this.cancelAutoCloseHandler(),this.cancelAutoCloseHandler=null},render:function(){var b="context-menu position-absolute ";return b+=this.props.options?"":"hide",a.DOM.div({className:b,style:{top:this.props.options.position.top+"px",left:this.props.options.position.left+"px"}},a.DOM.div({className:"context-menu-tree"},d.buildMenuTree(this.props.options.items)))},_onDocumentMouseDown:function(){b.clearContextMenu(),$("*:not(.context-menu ul li)").off("mousedown",this._onDocumentMouseDown)},_handleAutoClose:function(){this.cancelAutoCloseHandler=d.doWhenMouseDistance(this.getDOMNode(),150,this._onDocumentMouseDown)}});return e});