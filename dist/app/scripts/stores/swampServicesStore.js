define(["AppDispatcher","definitions/SwampServicesStore","definitions/SwampService","constants/ACTION_SOURCE","constants/SERVER_ACTION_TYPE","constants/CLIENT_ACTION_TYPE"],function(a,b,c,d,e,f){function g(a){var b,d=a.action,f=!1;switch(d.actionType){case e.FIRST_DATA_RECEIVED:_.forEach(d.rawServices,function(a){b=new c(a),i.addService(b)}),f=!0;break;case e.SERVICE_MONITOR_DATA:b=i.getByName(d.serviceName),b&&(b.updateMonitorData(d.monitorData),f=!0);break;case e.SERVICE_START:b=i.getByName(d.serviceName),b&&(b.forceStart(d.serviceData),f=!0);break;case e.SERVICE_STOP:b=i.getByName(d.serviceName),b&&(b.forceStop(d.serviceData),f=!0);break;case e.SERVICE_RESTART:b=i.getByName(d.serviceName),b&&(b.forceRestart(),f=!0);break;case e.SERVICE_OUT_LOG_MESSAGE:b=i.getByName(d.serviceName),b&&(b.addOut(d.logMessage),f=!0);break;case e.SERVICE_ERROR_LOG_MESSAGE:b=i.getByName(d.serviceName),b&&(b.addError(d.logMessage),f=!0)}return b=null,f}function h(a){var b=a.action,c=!1;switch(b.actionType){case f.START_SERVICE:i.startService(b.serviceId),c=!0;break;case f.STOP_SERVICE:i.stopService(b.serviceId),c=!0;break;case f.RESTART_SERVICE:i.restartService(b.serviceId),c=!0;break;case f.START_ALL_SERVICES:i.startAllServices(),c=!0;break;case f.STOP_ALL_RUNNING_SERVICES:i.stopAllRunningServices(),c=!0;break;case f.RESTART_ALL_RUNNING_SERVICES:i.restartAllRunningServices(),c=!0}return c}var i=new b;return a.register(function(a){var b=!1;a.source==d.SERVER_ACTION?b=g(a):a.source==d.CLIENT_ACTION&&(b=h(a)),b&&i.emitChange()}),i});