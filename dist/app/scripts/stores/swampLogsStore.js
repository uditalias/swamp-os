define(["AppDispatcher","definitions/SwampLogsStore","constants/ACTION_SOURCE","constants/SERVER_ACTION_TYPE","constants/CLIENT_ACTION_TYPE","constants/LOG_TYPE","services/serializeService"],function(a,b,c,d,e,f,g){function h(a){var b=a.action,c=!1;switch(b.actionType){case d.FIRST_DATA_RECEIVED:if(b.swampData.logs&&(b.swampData.logs.err||b.swampData.logs.out)){var e;_.forEach(b.swampData.logs.err,function(a){e=g.serializeLogData(f.ERROR,a,!0),j.addError(e)}),_.forEach(b.swampData.logs.out,function(a){e=g.serializeLogData(f.OUT,a,!0),j.addOut(e)}),c=!0}break;case d.SWAMP_OUT_LOG_MESSAGE:j.addOut(b.logMessage),c=!0;break;case d.SWAMP_ERROR_LOG_MESSAGE:j.addError(b.logMessage),c=!0}return c}function i(a){var b=a.action,c=!1;switch(b.actionType){case e.TOGGLE_NOTIFICATIONS_PANEL:j.setPanelState(b.state),c=!0;break;case e.BROWSER_BLURED:j.setIsBrowserFocused(!1);break;case e.BROWSER_FOCUSED:j.setIsBrowserFocused(!0)}return c}var j=new b;return a.register(function(a){var b=!1;a.source==c.SERVER_ACTION?b=h(a):a.source==c.CLIENT_ACTION&&(b=i(a)),b&&j.emitChange()}),j});